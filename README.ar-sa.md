# سكريبت ترحيل ذاكرة التخزين المؤقت لـ Dev Drive

لغات أخرى:
| [English](README.en-us.md) | [简体中文](README.md) | [繁体中文](README.zh-tw.md) | [日本語](README.ja-jp.md) | [한국어](README.ko-kr.md) | [Français](README.fr-fr.md) | [Deutsch](README.de-de.md) | [Italiano](README.it-it.md) | [Español](README.es-es.md) | [Русский](README.ru-ru.md) | [Português (BR)](README.pt-br.md) | [Nederlands](README.nl-nl.md) | [Türkçe](README.tr-tr.md) | [العربية](README.ar-sa.md) | [हिंदी](README.hi-in.md) | [ไทย](README.th-th.md) |

## مقدمة

[سكريبت ترحيل ذاكرة التخزين المؤقت لـ Dev Drive](https://github.com/jqknono/migrate-to-win11-dev-drive) هو أداة تفاعلية لـ PowerShell مصممة لمساعدة المطورين على نقل أدلة ذاكرة التخزين المؤقت لأدوات التطوير المختلفة إلى Dev Drive في Windows 11 (نظام ملفات ReFS) لتحسين الأداء وإطالة عمر القرص الصلب وتقليل مساحة التخزين المستخدمة.

### المزايا الأساسية

- **إطالة عمر القرص الصلب**: من خلال نقل ملفات ذاكرة التخزين المؤقت التي تتم قراءتها وكتابتها بشكل متكرر إلى Dev Drive، يمكن تقليل عدد عمليات الكتابة على قرص النظام (عادةً ما يكون SSD)، مما يطيل من عمره التشغيلي.
- **تقليل مساحة التخزين المستخدمة**: نقل ملفات ذاكرة التخزين المؤقت الكبيرة (مثل ذاكرة التخزين المؤقت لـ `node_modules` في Node.js، وذاكرة التخزين المؤقت لـ pip في Python، إلخ) من قرص النظام يمكن أن يحرر مساحة قيمة على قرص النظام بشكل كبير.
- **أداء عالي**: الاستفادة من نظام ملفات ReFS وميزات التحسين في Dev Drive يمكن أن يعزز سرعة قراءة وكتابة ذاكرة التخزين المؤقت، ويسرع من عملية البناء واستجابة أدوات التطوير.

### تقنية Copy-on-Write (COW)

يعتمد Dev Drive على نظام ملفات ReFS ويستفيد من تقنية Copy-on-Write (COW). COW هي تقنية إدارة الموارد، وفكرتها الأساسية هي: عندما يطلب عدة متصلين نفس المورد في نفس الوقت، فإنهم يشاركون في البداية نفس المورد. فقط عندما يحتاج أحد المتصلين إلى تعديل المورد، يقوم النظام بإنشاء نسخة من المورد لهذا المتصل، ثم يسمح له بتعديل هذه النسخة دون التأثير على المورد الأصلي الذي يستخدمه المتصلون الآخرون.

في سياق Dev Drive، تجلب تقنية COW مزايا كبيرة:

1.  **نسخ الملفات بكفاءة**: عندما يكون هناك حاجة لنسخ ملف كبير، لا يقوم ReFS بإجراء نسخة فعلية للبيانات على الفور، بل ينشئ مدخلاً جديداً للملف يشير إلى نفس كتل القرص. فقط عندما يتم تعديل الملف المصدر أو الملف الهدف، يتم نسخ كتل البيانات المعدلة فعلياً. هذا يجعل عملية نسخ الملفات سريعة جداً وتستهلك مساحة تخزين إضافية ضئيلة تقريباً (حتى يتم حدوث تعديل).
2.  **توفير مساحة التخزين**: بالنسبة لأدلة ذاكرة التخزين المؤقت التي تحتوي على عدد كبير من الملفات المتشابهة (على سبيل المثال، حزم بنفس الإصدار يعتمد عليها مشاريع متعددة)، يمكن لـ COW مشاركة كتل البيانات غير المعدلة بفعالية، مما يقلل من إجمالي مساحة التخزين المستخدمة.
3.  **تحسين الأداء**: تقليل عمليات نسخ البيانات غير الضرورية، مما يزيد من كفاءة عمليات الملفات.

### Dev Drive وخصائص refs

قدمت Windows 11 Dev Drive، وهو وحدة تخزين محسّنة خصيصاً للمطورين. يستخدم Dev Drive نظام الملفات Resilient File System (ReFS) كنظام ملفاته ويقوم بتمكين وظائف التحسين المتخصصة.

**ReFS (Resilient File System)** هو نظام ملفات من الجيل الجديد طورته مايكروسوفت، وبالمقارنة مع NTFS التقليدي، يتميز بالمزايا التالية:

- **سلامة البيانات**: تحسين موثوقية البيانات من خلال مجموعات التحقق ووظائف الإصلاح التلقائي.
- **قابلية التوسع**: دعم وحدات تخزين وأحجام ملفات أكبر.
- **تحسين الأداء**: تم تحسينه لأحمال عمل الافتراضية والبيانات الضخمة.
- **تكامل COW**: دعم أصلي لدلالات Copy-on-Write، وهو مفيد بشكل خاص لعمليات الملفات في سيناريوهات التطوير.

**تحسينات Dev Drive**: على أساس ReFS، يقوم Dev Drive بتحسين المزيد لأحمال عمل المطورين، مثل تحسين الأداء لسيناريوهات مثل ذاكرة التخزين المؤقت لمدير الحزم ومخرجات البناء.

## وظائف السكريبت

يوفر هذا السكريبت الوظائف الرئيسية التالية:

- **ترحيل ذاكرة التخزين المؤقت**: يدعم نقل أدلة ذاكرة التخزين المؤقت لأدوات التطوير المختلفة إلى Dev Drive.
  - Node.js (npm, yarn, pnpm)
  - Python (pip)
  - .NET (NuGet)
  - Java (Maven, Gradle)
  - Go (Go modules)
  - Rust (Cargo)
  - إضافات VS Code
  - أدلة TEMP/TMP في Windows
    - JetBrains IDE (IntelliJ, PyCharm, إلخ)
  - Android SDK
  - Chocolatey (مدير حزم Windows)
  - المجلدات المخفية للمستخدم (.xxx)
- **إنشاء Dev Drive**: يوفر معالج تفاعلي لمساعدة المستخدمين على إنشاء قسم Dev Drive جديد.
- **حذف Dev Drive**: إزالة قسم Dev Drive بأمان،并提供 خيار لاستعادة ذاكرة التخزين المؤقت التي تم ترحيلها إلى مواقعها الأصلية.
- **استعادة ذاكرة التخزين المؤقت**: استعادة أدلة ذاكرة التخزين المؤقت التي تم نقلها إلى Dev Drive إلى مواقعها الأصلية.
- **ترحيل الروابط**: ترحيل أدلة ذاكرة التخزين المؤقت من خلال إنشاء روابط رمزية/نقاط اتصال، دون تعديل أي متغيرات بيئة.
- **وضع الاختبار**: يوفر عمليات محاكاة آمنة لاختبار وظائف مثل حذف Dev Drive دون تعديل النظام فعلياً.

## تعليمات الاستخدام

1.  **متطلبات النظام**:
    - Windows 11 (الإصدار 22000 أو أحدث)
    - PowerShell 7+ (pwsh)
2.  **تشغيل السكريبت**:
    - افتح PowerShell 7 (pwsh) بامتيازات المسؤول.
    - انتقل إلى الدليل الذي يوجد به السكريبت.
    - نفذ `.\Setup-DevDriveCache.ps1`.
3.  **العملية التفاعلية**:
    - بعد بدء تشغيل السكريبت، سيتم عرض قائمة تفاعلية ترشدك خلال العمليات المختلفة.
    - اختر الخيار المناسب لترحيل ذاكرة التخزين المؤقت أو إنشاء أو حذف Dev Drive، إلخ.
    - تتطلب جميع العمليات الحاسمة تأكيداً من المستخدم لضمان السلامة.

## ملاحظات

- **الغرض**: الغرض من هذا السكريبت هو ترحيل مجلدات ذاكرة التخزين المؤقت، وليس تنظيفها. بعد الترحيل، لا تزال بيانات ذاكرة التخزين المؤقت الأصلية موجودة، فقط تغير موقع التخزين.
- **النسخ الاحتياطي**: قبل إجراء عمليات كبيرة (مثل حذف Dev Drive)، يوصى بعمل نسخة احتياطية من البيانات المهمة.
- **متغيرات البيئة**: السكريبت لا يقرأ أو يكتب متغيرات بيئة المستخدم؛ يتم الترحيل من خلال الروابط الرمزية.

## مراجع

- [الوثائق الرسمية لـ Microsoft Dev Drive](https://learn.microsoft.com/en-us/windows/dev-drive/)
- [الوثائق الرسمية لـ Resilient File System (ReFS)](https://learn.microsoft.com/en-us/windows-server/storage/refs/refs-overview)

## الدعم

- [宁屏去广告](https://www.nullprivate.com)